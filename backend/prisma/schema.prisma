generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id       String @id @default(cuid())
  name     String
  reg_no   String @unique
  role     Role   @default(STUDENT)
  password String

  // Relations
  events_created Event[] @relation("EventCreator")
  clubs          Club[]
  participations Event[] @relation("EventParticipants")
  volunteer_events Event[] @relation("EventVolunteers")

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("users")
}

model Club {
  id          String @id @default(cuid())
  name        String
  type        String
  description String?
  president   User   @relation(fields: [president_id], references: [id])
  president_id String
  vice_president User? @relation("VicePresident", fields: [vice_president_id], references: [id])
  vice_president_id String?
  faculty_coordinator User? @relation("FacultyCoordinator", fields: [faculty_coordinator_id], references: [id])
  faculty_coordinator_id String?
  budget      Float?
  logo        String?
  members     Int    @default(0)

  // Relations
  events Event[]

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("clubs")
}

model Event {
  id            String   @id @default(cuid())
  name          String
  type          String
  event_owner   Club     @relation(fields: [event_owner_id], references: [id])
  event_owner_id String
  venue         String
  description   String?
  date          DateTime
  time          String
  equipments    Json?
  participants  Json?
  volunteers    Json?
  event_managers Json?
  revenue_generated Float?

  // Relations
  creator       User @relation("EventCreator", fields: [creator_id], references: [id])
  creator_id    String
  participants_list User[] @relation("EventParticipants")
  volunteers_list   User[] @relation("EventVolunteers")

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("events")
}

enum Role {
  STUDENT
  FACULTY
  ADMIN
}